<Window x:Class="Functions.Views.FunctionsDashboardView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:wpf="clr-namespace:ScottPlot.WPF;assembly=ScottPlot.WPF"
        xmlns:views="clr-namespace:Functions.Views"
        xmlns:vms="clr-namespace:Functions.ViewModels"
        xmlns:cm="http://www.caliburnproject.org"
        d:DataContext="{d:DesignInstance vms:FunctionsDashboardViewModel}"
        mc:Ignorable="d"
        Title="Functions"
        MinHeight="700"
        MinWidth="1000">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="2*"/>
        </Grid.ColumnDefinitions>
        <DockPanel Grid.Column="0">
            <StackPanel DockPanel.Dock="Top"
                        Orientation="Horizontal">
                <Button cm:Message.Attach="CreateNewFunction"
                        ToolTip="Доабвить новую точку"
                        HorizontalAlignment="Center"
                        Background="White"
                        Margin="10"
                        Width="25"
                        Height="25">
                    <Button.Content>
                        <Rectangle Fill="{StaticResource AddItem}" Width="20" Height="20"/>
                    </Button.Content>
                </Button>
                <Button cm:Message.Attach="CopyToClipboard"
                        ToolTip="Скопировать данные (ctrl + c)"
                        Margin="10"
                        Background="White"
                        Width="25"
                        Height="25">
                    <Button.Content>
                        <Rectangle Fill="{StaticResource CopyToClipboard}" Width="20" Height="20"/>
                    </Button.Content>
                </Button>
                <Button cm:Message.Attach="PasteFromClipboard"
                        ToolTip="Вставить данные (ctrl + v)"
                        Margin="10"
                        Background="White"
                        Width="25"
                        Height="25">
                    <Button.Content>
                        <Rectangle Fill="{StaticResource PasteFromClipboard}" Width="20" Height="20"/>
                    </Button.Content>
                </Button>
                <Button cm:Message.Attach="RemoveAllPoints"
                        ToolTip="Очистить все точки"
                        Margin="10"
                        Background="White"
                        Width="25"
                        Height="25">
                    <Button.Content>
                        <Rectangle Fill="{StaticResource Clear}" Width="20" Height="20"/>
                    </Button.Content>
                </Button>
                <Button cm:Message.Attach="SaveToFile"
                        ToolTip="Сохранить в файл"
                        Background="White"
                        Margin="10"
                        Width="25"
                        Height="25">
                    <Button.Content>
                        <Rectangle Fill="{StaticResource GetFromFile}" Width="20" Height="20"/>
                    </Button.Content>
                </Button>
                <Button cm:Message.Attach="GetFromFile"
                        ToolTip="Сохранить в файл"
                        Margin="10"
                        Background="White"
                        Width="25"
                        Height="25">
                    <Button.Content>
                        <Rectangle Fill="{StaticResource SaveToFile}" Width="20" Height="20"/>
                    </Button.Content>
                </Button>
            </StackPanel>
            <StackPanel DockPanel.Dock="Top"
                        Orientation="Horizontal"
                        d:Visibility="Visible">
                <StackPanel.Style>
                    <Style TargetType="StackPanel">
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding SelectedFunctionManager}" Value="{x:Null}">
                                <Setter Property="Visibility" Value="Collapsed"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </StackPanel.Style>
                <TextBlock FontSize="14"
                           Margin="10">
                    <Run Text="Выбранная функция: "/>
                    <Run Text="{Binding SelectedFunctionManager.Function.Name}"/>
                </TextBlock>
                <Button Background="White"
                        Width="10"
                        Height="10"
                        cm:Message.Attach="ResetSelectedFunctionManager">
                    <Button.Content>
                        <Path Data="M0,0 L1,1 M0,1 L1,0" 
                              Stroke="Black"
                              StrokeThickness="1"
                              Stretch="Uniform"
                              Width="5"
                              Height="5"/>
                    </Button.Content>
                </Button>
            </StackPanel>
            <TreeView ItemsSource="{Binding FunctionsManagers}"
                      SelectedValuePath="{Binding SelectedFunctionManager}">
                <TreeView.ItemTemplate>
                    <DataTemplate>
                        <TreeViewItem IsExpanded="True"
                                      Header="{Binding Function}">
                            <TreeViewItem.HeaderTemplate>
                                <DataTemplate>
                                    <TextBox Text="{Binding Name}" Width="150"/>
                                </DataTemplate>
                            </TreeViewItem.HeaderTemplate>
                            <views:FunctionManagerView DataContext="{Binding}"/>
                        </TreeViewItem>
                    </DataTemplate>
                </TreeView.ItemTemplate>
            </TreeView>
        </DockPanel>
        <ContentControl Grid.Column="1" Content="{Binding PlotControl, Mode=OneTime}"/>
    </Grid>
</Window>
